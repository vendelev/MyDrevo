# Этап 4: Добавление медиа и поиск

## Название этапа и его краткое описание

Реализация функциональности для добавления медиафайлов (фотографий, документов) к профилям членов семьи и разработка системы поиска по содержимому генеалогического дерева.

## Цель этапа

Создать расширенную функциональность приложения, позволяющую пользователям добавлять медиафайлы к профилям и эффективно искать информацию в семейном древе.

## Функциональные требования

1. Загрузка и хранение фотографий для профилей
2. Загрузка и хранение документов (сканы, архивные документы)
3. Управление медиафайлами (просмотр, удаление)
4. Реализация системы поиска по именам членов семьи
5. Реализация расширенного поиска по датам, местам, событиям
6. Создание превью для загруженных изображений
7. Оптимизация хранения медиафайлов
8. Создание миграций для таблиц медиафайлов

## Нефункциональные требования

1. Безопасность хранения медиафайлов
2. Оптимизация размера изображений для веб-отображения
3. Быстрый поиск (не более 200ms для простого поиска)
4. Поддержка различных форматов изображений (JPG, PNG)
5. Поддержка различных форматов документов (PDF, DOC)
6. Защита от загрузки вредоносных файлов
7. Ограничение размера загружаемых файлов

## Сценарии использования

### Сценарий 1: Загрузка фотографии
1. Пользователь открывает профиль члена семьи
2. Выбирает опцию добавления фотографии
3. Выбирает файл с устройства
4. Система загружает и создает превью
5. Отображает фотографию в профиле

### Сценарий 2: Поиск по имени
1. Пользователь переходит на страницу поиска
2. Вводит имя или часть имени
3. Нажимает кнопку поиска
4. Система отображает список найденных членов семьи

### Сценарий 3: Расширенный поиск
1. Пользователь переходит на страницу расширенного поиска
2. Заполняет критерии поиска (даты, места, события)
3. Нажимает кнопку поиска
4. Система отображает результаты поиска

## Критерии приемки

1. Пользователи могут загружать фотографии к профилям
2. Пользователи могут загружать документы к профилям
3. Медиафайлы корректно отображаются в профилях
4. Простой поиск по именам работает корректно
5. Расширенный поиск по различным критериям работает правильно
6. Система предотвращает загрузку некорректных файлов
7. Все медиафайлы безопасно хранятся

## Зависимости

1. Этап 1: Базовая структура и аутентификация
2. Этап 2: Создание и управление профилями
3. Фреймворк Laravel
4. База данных SQLite с существующей структурой таблиц (backend/database/migration/structure.sql)
5. Система хранения файлов

## Оценка трудозатрат

20 человеко-часов