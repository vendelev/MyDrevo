# Этап 3. Расширение экспорта: состав данных, форматы и удобство

## 1. Название этапа и его краткое описание

Расширяем функциональность экспорта: добавляем дополнительные форматы и управляемость состава выгрузки. Пользователь может выбрать, что именно экспортировать и в каком виде.

## 2. Цель этапа

Повысить полезность экспорта для разных целей: перенос данных, аналитика, интеграции и юридические запросы.

## 3. Функциональные требования

1. Пользователь может выбрать формат экспорта из списка (например: JSON, CSV).
2. Пользователь может выбрать состав экспорта (чекбоксы/опции):
   - данные профилей членов семьи;
   - связи/отношения;
   - заметки/описания;
   - медиа: метаданные;
   - (опционально) медиа-файлы — только если включено отдельно.
3. Для каждого формата определено, как представляются связи (чтобы данные можно было корректно восстановить).
4. Экспорт учитывает выбранные параметры и фиксирует их в метаданных экспорта.
5. Если выбранный формат/состав недоступны, пользователь получает понятное сообщение.

## 4. Нефункциональные требования

- **Понятность**: выбор формата и состава данных объяснён в UI (что включается/не включается).
- **Совместимость**: форматы должны быть стабильными между версиями (минимум — версионирование экспорта).
- **Производительность**: при экспорте медиа-файлов учитывается размер и время формирования.

## 5. Сценарии использования

1. **Экспорт в CSV для анализа**
   - Пользователь выбирает CSV.
   - Выбирает только профили членов семьи.
   - Получает CSV-файл для загрузки в таблицы.

2. **Полный экспорт для переноса**
   - Пользователь выбирает JSON.
   - Включает профили, связи и заметки.
   - Получает полный экспорт в одном файле или архиве (в зависимости от решения).

3. **Экспорт с медиа-файлами**
   - Пользователь включает «включить медиа-файлы».
   - Система предупреждает, что экспорт может занять больше времени.
   - Пользователь получает архив.

## 6. Критерии приемки

1. Пользователь может выбрать формат (минимум два формата).
2. Пользователь может управлять составом экспорта.
3. Экспорт корректно отражает выбранные параметры.
4. Для каждого формата есть понятное описание в интерфейсе.
5. Экспорт имеет версию формата/схемы (например, поле schemaVersion в метаданных).

## 7. Зависимости

- Наличие этапа со статусом/историей экспортов (рекомендуется после Этапа 2).
- Поддержка формирования архивов (если включаем медиа-файлы).

## 8. Оценка трудозатрат

12–20 часов
