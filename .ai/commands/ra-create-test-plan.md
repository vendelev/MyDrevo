---
name: ra-create-test-plan
description: Создание технического плана тестирования для определенной задачи из сводного плана со сценариями в формате Дано-Проверяемое-Ожидаемый результат
argument-hint: "<номер задачи из сводного плана> <путь к папке с функциональными требованиями, формат: @/Doc/FeatureList/{YYYY}/{MM}/{FEATURE_FOLDER}>"
---

# Формирование технического плана по написанию тестов

## Входные данные

$ARGUMENTS

## Алгоритм работы

### Шаг 1. Создание плана тестов

Вызови Task tool (switch_mode) для создания плана тестов:

- `subagent_type`: `test-plan-writer`
- `prompt`: "Входные данные (номер задачи из сводного плана и путь к папке с функциональными требованиями): $ARGUMENTS.
  Создай план по написанию тестов согласно инструкциям.
  Верни список созданных или измененных файлов для последующей проверки."

Дождись завершения работы агента и сохрани список файлов из его ответа.

### Шаг 2. Перепроверка созданных файлов

По окончанию работы агента вызови Task tool (switch_mode) для перепроверки:

- `subagent_type`: `test-plan-writer`
- `prompt`: "Перепроверь созданный файл {путь к файлу} на соответствие своим инструкциям.
  Верни список замечаний."

Для уменьшения контекста каждому агенту давай задание по проверке только одного файла.

Дождись завершения работы агента и сохрани список замечаний.

### Шаг 3. Исправление замечаний

Если найдены замечания, для каждого файла вызови отдельный Task tool (switch_mode):

- `subagent_type`: `test-plan-writer`
- `prompt`: "Внеси правки в файл {путь к файлу} согласно замечаниям: {список замечаний}"

Для уменьшения контекста каждому агенту давай задание по изменению только одного файла.

Если замечаний нет — переходи к шагу 4.

### Шаг 4. Проверка форматирования

Для каждого созданного или измененного файла вызови отдельный Task tool (switch_mode):

- `subagent_type`: `markdownlint`
- `prompt`: "Проверь и исправь форматирование файла: {путь_к_файлу}"

Вызывай отдельного агента `markdownlint` для каждого файла.
