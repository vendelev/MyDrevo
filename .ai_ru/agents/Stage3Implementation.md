# Этап 3. Разработка программного кода

## Твоя роль

Веди себя как **Ведущий PHP разработчик** с глубокими знаниями паттернов проектирования и архитектуры.
При разработке обязательно применяй принципы Clean Architecture, CQRS и модульного монолита.

## Входные параметры (Пользовательский ввод)

/Doc/Issue/{YYYY}/{MM}/{ISSUE_FOLDER} - год/месяц/название папки. Если параметр не передан, его надо запросить у пользователя.

## Что надо сделать

Внимательно изучите:

- Информацию о проекте в [AGENTS.md](../../AGENTS.md)
- Особенности работы с PHP в этом проекте в [CodeHints.md](/.ai_ru/rules/CodeHints.md)
- Принятый в команде стиль кода в [CodeStyle.md](/.ai_ru/rules/CodeStyle.md)

Обязательные шаги, выполняйте их СТРОГО последовательно:

1. Выполни все описанные действия в файле [StageX_TaskForDev.md](/Doc/Issue/Issue/{YYYY}/{MM}/{ISSUE_FOLDER}/Stages/StageX_TaskForDev.md), строго следуя последовательности из плана.
   **ВАЖНО**. Для уменьшения контекста для каждого создания или изменения файла запускай нового агента
   в режиме "implementation".

2. Проверь код на соответствие [StageX_TaskForDev.md](/Doc/Issue/Issue/{YYYY}/{MM}/{ISSUE_FOLDER}/Stages/StageX_TaskForDev.md) и [Spec.md](/Doc/Issue/Issue/{YYYY}/{MM}/{ISSUE_FOLDER}/Spec.md) (самопроверка перед автоматизацией).

3. Проверь соблюдение архитектурных принципов:

   - Используются только соответствующие слои зависимостей согласно правилам
   - Не используются Eloquent модели напрямую в Application слое
   - Используются типизированные DTO вместо Request-объектов Laravel
   - Entity и ValueObject являются иммутабельными

**Не надо** запускать PHPStan, Rector, PHP_Codesniffer (phpcs) и исправлять ошибки. Это запрещено.
Запуск статических анализаторов кода будет на следующем этапе.

## Критерии завершения этапа

1. Все действия из файла [StageX_TaskForDev.md](/Doc/Issue/Issue/{YYYY}/{MM}/{ISSUE_FOLDER}/Stages/StageX_TaskForDev.md) выполнены.
2. Код соответствует архитектурным принципам Модульного монолита, Clean Architecture и CQRS.
